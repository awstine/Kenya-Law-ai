<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kenyan Law Chatbot</title>
    <link rel="stylesheet" href="law.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Header with logo, welcome message, and logout -->
        <header>
            <div class="logo">
                <div id="welcome-user" class="welcome-message">Welcome to Kenyan Law Chatbot, User!</div>
            </div>
            <button id="logout-btn">Sign Out</button>
        </header>

        <main>
            <!-- Sidebar with chatbot description -->
            <div class="sidebar">
                <div class="sidebar-header">
                    <h2>About This Chatbot</h2>
                </div>
                <div class="description-container" id="chat-history">
                    <!-- Chatbot description -->
                    <div class="chatbot-description">
                        <p>This AI-powered legal assistant provides information and guidance on Kenyan law.</p>
                        
                        <h4>Features:</h4>
                        <ul>
                            <li>Access to Kenyan legal information</li>
                            <li>Explanations of legal terms</li>
                            <li>Guidance on legal procedures</li>
                            <li>Information about your rights</li>
                        </ul>
                        
                        <h4>How to Use:</h4>
                        <p>Simply type your legal question in the chat interface and receive instant guidance based on Kenyan law.</p>
                        
                        <div class="disclaimer">
                            <p><strong>Note:</strong> This chatbot provides general information only. For specific legal advice, please consult with a qualified attorney.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main content area - show iframe directly -->
            <div class="content-area">
                <!-- Microsoft Bot iframe -->
                <iframe id="bot-iframe" src="https://web.powerva.microsoft.com/environments/Default-84c31ca0-ac3b-4eae-ad11-519d80233e6f/bots/cr5be_kenyanLawAdvisor/webchat?__version__=2"></iframe>
            </div>
        </main>
    </div>

    <!-- Add this right before the closing </body> tag in law.html -->
<div id="feedback-button">
    <button id="open-feedback">Give Feedback</button>
</div>

<!-- Feedback Modal -->
<div id="feedback-modal" class="modal">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2>How was your experience?</h2>
        
        <div class="rating-container">
            <div class="stars">
                <span class="star" data-rating="1">★</span>
                <span class="star" data-rating="2">★</span>
                <span class="star" data-rating="3">★</span>
                <span class="star" data-rating="4">★</span>
                <span class="star" data-rating="5">★</span>
            </div>
            <div class="rating-text">Select your rating</div>
        </div>
        
        <div class="feedback-form">
            <textarea id="feedback-text" placeholder="Tell us about your experience with Kenya Law Advisor..."></textarea>
            <button id="submit-feedback" disabled>Submit Feedback</button>
        </div>
    </div>
</div>

<!-- <script type="module">
    // Import Firebase auth
    import { getAuth, signOut } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
  
    // Your Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyAoQEyfcaUTYwYsZXcKtaYYYtk7dBapHeA",
      authDomain: "kenya-law-chatbot.firebaseapp.com",
      projectId: "kenya-law-chatbot",
      storageBucket: "kenya-law-chatbot.firebasestorage.app",
      messagingSenderId: "1071459759295",
      appId: "1:1071459759295:web:b2e6c1348dc917865a420a",
      measurementId: "G-ZYSC5K2CKZ"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
  
    // Set up logout functionality
    document.addEventListener('DOMContentLoaded', () => {
      const logoutBtn = document.getElementById('logout-btn');
      
      if (logoutBtn) {
        logoutBtn.addEventListener('click', async () => {
          try {
            // Sign out from Firebase
            await signOut(auth);
            
            // Clear local user data
            localStorage.removeItem('user');
            
            // Redirect to login page
            window.location.href = 'login.html';
          } catch (error) {
            console.error('Error signing out:', error);
            alert('Failed to sign out. Please try again.');
          }
        });
      }
    });
  </script>

<script>
    // Check if user is logged in
    document.addEventListener('DOMContentLoaded', () => {
      const userData = localStorage.getItem('user');
      
      if (!userData) {
        // Not logged in, redirect to login page
        window.location.href = 'login.html';
        return;
      }
      
      try {
        const user = JSON.parse(userData);
        
        if (!user.isLoggedIn) {
          // User data exists but not logged in
          window.location.href = 'login.html';
          return;
        }
        
        // User is logged in, update welcome message if needed
        const welcomeUser = document.getElementById('welcome-user');
        if (welcomeUser && user.name) {
          welcomeUser.textContent = `Welcome to Kenyan Law Chatbot, ${user.name}!`;
        } else if (welcomeUser && user.username) {
          welcomeUser.textContent = `Welcome to Kenyan Law Chatbot, ${user.username}!`;
        }
      } catch (error) {
        console.error('Error checking authentication:', error);
        window.location.href = 'login.html';
      }
    });
  </script> -->

    <script src="script1.js"></script>
    <script src="law.js"></script>
<script src="feedback-submit.js"></script>
</body>
</html>